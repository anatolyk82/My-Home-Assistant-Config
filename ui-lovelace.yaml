title: My Home
#background: center / cover no-repeat url("/local/images/background.jpg") fixed
# Include external resources
resources:
    #  - url: /local/custom_ui/alarm_control_panel-card.js
    #type: js
    #  - url: /local/custom_ui/dark-sky-weather-card.js?v=6
    #type: js
    #  - url: /local/custom_ui/dark-sky-weather-card.css
    #type: css
    #- url: /local/custom_ui/bignumber-card.js
    #type: js
    #  - url: /local/custom_ui/gauge-card.js
    #type: js
  - url: /local/custom_ui/slider-entity-row.js
    type: js
    #https://github.com/thomasloven/lovelace-fold-entity-row
  - url: /local/custom_ui/card-tools.js #required for fold-entity-row
    type: js
  - url: /local/custom_ui/fold-entity-row.js #custom:fold-entity-row
    type: js

# Optional background for all views. Check https://developer.mozilla.org/en-US/docs/Web/CSS/background for more examples.
#background: center / cover no-repeat url("/background.png") fixed
# Exclude entities from "Unused entities" view
excluded_entities:
  - weblink.router
views:
    # View tab title.
  - title: "Overview"
    # Optional unique id for direct access /lovelace/${id}
    id: overview
    # Optional background (overwrites the global background).
    #background: radial-gradient(crimson, skyblue)
    # Each view can have a different theme applied. Theme should be defined in the frontend.
    theme: dark-mode
    # The cards to show on this view.
    cards:
      - type: entities
        entities:
          - alarm_control_panel.house
          - sensor.keypad

      - type: entities
        entities:
        - device_tracker.google_maps_104206738568170616102

      - type: entities
        entities:
        - sensor.moonphases

      - type: entities
        entities:
        - sensor.sunrise_time
        - sensor.solar_angle
        - sensor.sunset_time

      - type: entities
        entities:
        - sensor.vasttrafik_linje_176_mot_lindholmen
        - sensor.vasttrafik_linje_176_mot_rannebergen
        - sensor.vasttrafik_linje_75_mot_angered

      - type: vertical-stack
        cards:
        - type: glance
          title: Current weather
          column_width: calc(100% / 4)
          entities:
          - sensor.yr_temperature
          - sensor.yr_humidity
          - sensor.yr_pressure
          - sensor.yr_cloudiness
        - type: glance
          column_width: calc(100% / 4)
          entities:
          - sensor.yr_precipitation
          - sensor.yr_wind_speed
          - sensor.yr_wind_direction
          - sensor.yr_fog

      - type: entity-filter
        entities:
          - device_tracker.google_maps_104206738568170616102
        state_filter:
          - 'home'
        card:
          type: media-control
          entity: media_player.sirius

      - type: entities
        entities:
        - switch.wifi_cord_1
        - sensor.illumination_7811dcb7f720
        - binary_sensor.all_in_bed
        - light.mood_lamp
        - light.stairs
        - binary_sensor.wifi_problem
        - vacuum.roborock


  - title: "First floor"
    id: floor1
    cards:
      - type: picture-elements
        image: /local/images/first_floor_ext.jpg
        elements:
          - type: icon
            entity: camera.foscam_1
            icon: mdi:cctv
            style:
              top: 14%
              left: 17%
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a817
            style:
              top: 77%
              left: 46%
          - type: state-icon  # Motion - kitchen
            entity: binary_sensor.motion_sensor_158d000200ce6a
            style:
              top: 25%
              left: 73%
          - type: state-icon # Motion - Living room
            entity: binary_sensor.motion_sensor_158d00023e8333
            style:
              top: 25%
              left: 39%
          - type: state-icon
            entity: light.bulb_16
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 45%
              left: 32%
          - type: state-icon
            entity: light.bulb_14
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 45%
              left: 47%
          - type: state-icon # Light - Entrance
            entity: light.ikea_lamp_2
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 77%
              left: 53%
          - type: state-icon # Door - Entrance
            entity: binary_sensor.door_window_sensor_158d000238694e
            style:
              top: 92%
              left: 47.8%
          - type: state-icon # Door - Living room
            entity: binary_sensor.door_window_sensor_158d00022bd3cb
            style:
              top: 50.5%
              left: 20%
          - type: state-icon # Door - Kitchen
            entity: binary_sensor.door_window_sensor_158d000232d8e8
            style:
              top: 43%
              left: 84.5%
          - type: state-icon # Water leak
            entity: binary_sensor.water_leak_sensor_158d00023aa4a9
            style:
              top: 74%
              left: 70%
          - type: state-icon # Smoke detector
            entity: binary_sensor.smoke_sensor_158d0002311b86
            style:
              top: 41%
              left: 57%
          - type: state-label
            entity: sensor.temperature_158d000245a9ee #Living room temperature
            style:
              top: 15%
              left: 27%
          - type: state-icon  # Kitchen lamps 1
            entity: light.kitchen_lights_1
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            style:
              top: 43%
              left: 76%
          - type: state-icon  # Kitchen lamps 2
            entity: light.kitchen_lights_2
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            style:
              top: 43%
              left: 66%
          - type: state-icon  # MoodLamp
            entity: light.mood_lamp
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            style:
              top: 14%
              left: 53%
      - type: horizontal-stack
        cards:
        - type: sensor
          entity: sensor.temperature_158d000245a9ee
          graph: line
        - type: sensor
          entity: sensor.humidity_158d000245a9ee
          graph: line
      - type: glance
        column_width: calc(100% / 3)
        entities:
          - sensor.illumination_158d000236a817
          - sensor.illumination_158d00023e8333
          - sensor.illumination_158d000200ce6a
      - type: vertical-stack
        cards:
        - type: entities
          title: Lights
          entities:
            - type: custom:slider-entity-row
              entity: light.gateway_light_7811dcb7f720
              name: Xiaomi Gateway
            - type: custom:slider-entity-row
              entity: light.living_room
              name: Living room
            - type: custom:slider-entity-row
              entity: light.bulb_16
              name: Living room right
            - type: custom:slider-entity-row
              entity: light.bulb_14
              name: Living room left
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_2
              name: Entrance
            - type: custom:slider-entity-row
              entity: light.kitchen_lights_1
              name: Kitchen1
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_4
              name: Kitchen Lamp 1
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_5
              name: Kitchen Lamp 2
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_6
              name: Kitchen Lamp 3
            - type: custom:slider-entity-row
              entity: light.kitchen_lights_2
              name: Kitchen2
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_7
              name: Kitchen Lamp 7
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_8
              name: Kitchen Lamp 8
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_9
              name: Kitchen Lamp 9


  - title: "Second floor"
    id: floor2
    cards:
      - type: picture-elements
        image: /local/images/second_floor_ext.jpg
        elements:
          - type: icon # Foscam camera 1
            entity: camera.foscam_1
            icon: mdi:cctv
            style:
              top: 14%
              left: 7%
          - type: state-icon
            entity: binary_sensor.presence_upstairs
            style:
              top: 77%
              left: 50%
          - type: state-icon
            entity: light.ikea_lamp_1
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 61%
              left: 50%
          - type: state-icon  # Bedroom - light
            entity: light.bulb_13 
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 50%
              left: 26%
          - type: state-icon  # Bedroom - Motion sensor
            entity: binary_sensor.motion_sensor_158d000236a59e
            style:
              top: 35%
              left: 26%
          - type: state-icon  # Bedroom - bed light
            entity: light.bed_led
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 18%
              left: 26%
          - type: state-label
            entity: sensor.temperature_158d0002320bc1
            style:
              top: 48%
              left: 50%
          - type: state-icon # Workroom light
            entity: light.bulb_15
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 67%
              left: 70%
          - type: state-icon # Workroom desklight
            entity: light.xiaomi_philips_desklamp
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 67%
              left: 82%
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a581
            style:
              top: 78%
              left: 76%
          - type: state-icon # Water sensor
            entity: binary_sensor.water_leak_sensor_158d00023e90af
            style:
              top: 25%
              left: 49%
          - type: state-icon # Room light
            entity: light.bulb_17
            tap_action:
              action: toggle
            hold_action: more-info
            style:
              top: 33%
              left: 70%
          - type: state-icon #Room motion sensor
            entity: binary_sensor.motion_sensor_158d000236be32
            style:
              top: 33%
              left: 80%
      - type: horizontal-stack
        cards:
        - type: sensor
          entity: sensor.temperature_158d0002320bc1
          graph: line
        - type: sensor
          entity: sensor.humidity_158d0002320bc1
          graph: line
      - type: glance
        column_width: calc(100% / 4)
        entities:
          - sensor.lightlevel_upstairs
          - sensor.illumination_158d000236a59e
          - sensor.illumination_158d000236a581
          - sensor.illumination_158d000236be32
      - type: vertical-stack
        cards:
        - type: entities
          title: Lights
          entities:
            - type: custom:slider-entity-row
              entity: light.ikea_lamp_1
              name: Upstairs
            - type: custom:slider-entity-row
              entity: light.bulb_13
              name: Bedroom
            - type: custom:slider-entity-row
              entity: light.bed_led
              name: Bed LED
            - type: custom:slider-entity-row
              entity: light.bulb_15
              name: Work room
            - type: custom:slider-entity-row
              entity: light.xiaomi_philips_desklamp
              name: Desklamp
            - type: custom:slider-entity-row
              entity: light.xiaomi_philips_desklamp_ambient_light
              name: Desklamp ambient
            - type: custom:slider-entity-row
              entity: light.bulb_17
              name: Room


  - title: "Yard"
    id: yard
    cards:
      - type: entities
        entities:
        - switch.cameras

      - type: vertical-stack
        cards:
        - type: picture-glance
          title: "Bakgård (Foscam1)"
          camera_image: camera.foscam_1
          entities:
          - binary_sensor.foscam_1_motion
          - binary_sensor.foscam1

        - type: entities
          entities:
          - switch.foscam1_motion
          - input_boolean.foscam1_snapshot

      - type: entities
        entities:
        - binary_sensor.openclose_4

      - type: vertical-stack
        cards:
        - type: picture-glance
          title: "Gården (Foscam2)"
          camera_image: camera.foscam_2
          entities:
          - binary_sensor.foscam_2_motion
          - binary_sensor.foscam2

        - type: entities
          entities:
          - switch.foscam2_motion
          - input_boolean.foscam2_snapshot



  - title: "Weather"
    id: weather
    cards:
      - type: vertical-stack
        cards:
        - type: weather-forecast
          #entity: weather.dark_sky
          entity: weather.smhi_home
        - type: glance
          column_width: calc(100% / 3)
          entities:
          - sensor.temperature_158d0002478a68
          - sensor.humidity_158d0002478a68
          - sensor.pressure_158d0002478a68
      - type: history-graph
        title: Temperature history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_temperature
            name: Yr temperature
          - entity: sensor.temperature_158d0002478a68
            name: Temperature sensor
      - type: history-graph
        title: Humidity history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_humidity
            name: Yr humidity
          - entity: sensor.humidity_158d0002478a68
            name: Humidity sensor
      - type: history-graph
        title: Pressure history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_pressure
            name: Yr pressure
          - entity: sensor.pressure_158d0002478a68
            name: Pressure sensor


  - title: "Settings"
    id: settings
    cards:
      - type: entities
        show_header_toggle: false
        entities:
        - sensor.hass_available_version
        - sensor.hass_installed_version
      - type: entities
        show_header_toggle: false
        title: HA Files
        entities:
        - sensor.home_assistant_v2_db
        - sensor.home_assistant_log
      - type: entities
        show_header_toggle: false
        entities:
        - sensor.ssh_attack
        - sensor.ssl_certificate_expiry
      - type: entities
        entities:
        - sensor.entrance_lamp_on_today
        - sensor.living_room_right_lamp_on_today
        - sensor.living_room_left_lamp_on_today
        - sensor.upstairs_lamp_on_today
        - sensor.bedroom_lamp_on_today
        - sensor.bed_led_on_today
        - sensor.room_lamp_on_today
        - sensor.desktop_lamp_on_today
        - sensor.workroom_lamp_on_today
        - sensor.kitchen_1_on_today
        - sensor.kitchen_2_on_today
      - type: entities
        entities:
          - sensor.rssi_bed_light
          - sensor.rssi_keypad
          - sensor.rssi_mood_lamp
      - type: entities
        title: Batteries
        show_header_toggle: false
        entities:
        - sensor.battery_door_sensor_entrance
        - sensor.battery_door_sensor_kitchen
        - sensor.battery_door_sensor_living_room
        - sensor.battery_motion_sensor_living_room
        - sensor.battery_motion_sensor_kitchen
        - sensor.battery_motion_sensor_entrance
        - sensor.battery_motion_sensor_second_floor
        - sensor.battery_motion_sensor_workroom
        - sensor.battery_motion_sensor_room
        - sensor.battery_motion_sensor_bedroom
        - sensor.battery_temperature_sensor_floor1
        - sensor.battery_temperature_sensor_floor2
        - sensor.battery_temperature_sensor_outside
        - sensor.battery_water_leak_sensor
        - sensor.battery_smoke_sensor
        - sensor.ikea_switch_1_battery_level
        - sensor.ikea_switch_2_battery_level
        - sensor.ikea_switch_3_battery_level

      - type: vertical-stack
        cards:
        - type: entities
          show_header_toggle: false
          entities:
          - input_boolean.vacation_mode
        - type: conditional
          conditions:
          - entity: input_boolean.vacation_mode
            state: "on"
          card: 
            type: entities
            show_header_toggle: false
            entities:
            - script.vacation_lights
            - automation.xmas_lights_turn_off_at_sunrise_if_vacation
            - automation.xmas_lights_turn_on_at_sunset_if_vacation
            - automation.vacation_lights_start_on_sunset
            - automation.vacation_lights_stop_at_midnight
            - automation.moodlamp_turn_on_at_sunset_if_vacation
            - automation.moodlamp_turn_off_at_sunrise_if_vacation

      - type: vertical-stack
        cards:
        - type: entities
          show_header_toggle: false
          title: Alarms
          entities:
          - automation.water_leakage_floor_1
          - automation.water_leakage_floor_2
          - automation.too_high_temperature_at_the_first_floor
          - automation.too_high_temperature_at_the_second_floor
          - automation.smoke_alarm
          - automation.allinbed_alarm_trigger_if_any_door_is_open
        - type: entities
          show_header_toggle: false
          title: Automations
          entities:
          - automation.update_available_notifications
          - automation.entrance_door_sound
          - automation.upstairs_light_turn_on_if_movements_06_30_23_00
          - automation.upstairs_light_turn_on_if_movements_23_00_06_30
          - automation.upstairs_light_turn_off_in_10_seconds_00_00_06_30
          - automation.upstairs_light_turn_off_in_5_minutes_06_30_00_00
          - automation.bedroom_bed_led_sunrise
          - automation.bedroom_toggle_bed_light
          - automation.bedroom_toggle_light
          - automation.bedroom_increase_brightness_to_maximum
          - automation.bedroom_decrease_brightness_to_minimum
          - automation.notify_on_unavailable_zigbee_lights
          - automation.entrance_light_force_to_update_vasttrafik_sensor
          - automation.entrance_light_turn_off_in_5_minutes_after_the_door_is_closed
          - automation.entrance_light_turn_on_at_7_23
          - automation.entrance_light_turn_on_when_the_door_opens
          - automation.hass_certificate_notification_on_update
          - automation.hass_new_version_available
          - automation.hass_notification_on_start
          - automation.hass_notification_on_stop
          - automation.camera_foscam1_restart_power_if_unavailable
          - automation.camera_foscam1_take_a_snapshot_if_motion
          - automation.camera_foscam2_restart_power_if_unavailable
          - automation.camera_foscam2_take_a_snapshot_if_motion
          - automation.christmas_lights_turn_on_when_disarmed
          - automation.moodlamp_turn_on_when_disarmed
          - automation.moodlamp_turn_on_if_motion_at_night
          - automation.moodlamp_turn_off_if_no_motion_at_night
          - automation.wifi_control_check_if_a_device_comes_from_unavailable
          - automation.wifi_control_notify_if_unavailable
          - automation.wifi_control_restart_router_if_too_many_unavailable
          - automation.wifi_control_run_script_on_start
          - automation.allinbed_alarm_turn_off_xiaomi_light_when_all_in_bed_is_off
          - automation.allinbed_alarm_turn_on_xiaomi_light_when_all_in_bed_is_on
          - automation.all_in_bed_run_script_on_start
          - automation.all_in_bed_run_script_every_10_minutes_if_off
          - automation.all_in_bed_run_script_if_motion_and_sensor_is_on

      - type: vertical-stack
        cards:
          - type: entities
            title: Network
            show_header_toggle: false
            entities:
            - sensor.nmap_router
            - sensor.nmap_xiaomi_gateway
            - sensor.nmap_google_home
            - sensor.nmap_laptop_dell_xps15
            - sensor.nmap_laptop_dell_xps13
            - sensor.nmap_iphone
            - sensor.nmap_galaxy_s9
            - sensor.nmap_galaxy_tablet
          - type: history-graph
            title: 'Ping'
            hours_to_show: 24
            entities:
            - sensor.ping_min_xiaomi
            - sensor.ping_avg_xiaomi
            - sensor.ping_max_xiaomi

      - type: entities
        show_header_toggle: false
        entities:
        - input_boolean.debug_mode
      - type: conditional
        conditions:
        - entity: input_boolean.debug_mode
          state: "on"
        - entity: alarm_control_panel.house
          state: "disarmed"
        card: 
          type: vertical-stack
          cards:
          - type: entities
            title: Debug card
            show_header_toggle: false
            entities:
            - automation.alarm_sound_rpi_speaker
            - automation.alarm_pending_sound
            - script.test_pushover
            - script.alarm_light_xiaomi_gateway
            - script.alarm_light_xiaomi_gateway_loop
            - script.alarm_on
            - script.alarm_off
            - switch.alarm_switch
            - input_boolean.all_lights_on_to_warm_color
            - switch.router_restart
          - type: entities
            title: Xiaomi Alarm settings
            show_header_toggle: false
            entities:
            - input_select.gateway_sound
            - input_boolean.mute_gateway_sounds
            - input_number.gateway_volume
            - input_number.loop_delay
            - script.alarm_sound_xiaomi_gateway
            - script.alarm_sound_xiaomi_gateway_once

      - type: entities
        show_header_toggle: false
        entities:
          - input_boolean.show_system_info
      - type: conditional
        conditions:
          - entity: input_boolean.show_system_info
            state: "on"
        card: 
          type: vertical-stack
          cards:
            - type: entities
              title: System Information
              show_header_toggle: false
              entities:
              - sensor.processor_use
              - sensor.cpu_temp
              - sensor.memory_free
              - sensor.memory_use_percent
              - sensor.disk_use_percent
              - sensor.last_boot


  - title: "Kiosk"
    id: kiosk
    cards:
      - type: vertical-stack
        cards:
        - type: markdown
          content: >
            # First floor
        - type: horizontal-stack
          title: First floor
          cards:
          - type: gauge
            title: "Temperature"
            entity: sensor.temperature_158d000245a9ee
            min: 0
            max: 50
            severity:
              yellow: 0
              green: 22
              red: 40
          - type: gauge
            title: "Humidity"
            entity: sensor.humidity_158d000245a9ee
            min: 0
            max: 100
            severity:
              yellow: 0
              green: 40
              red: 80
        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.bulb_16
            name: "Living room right"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info
          - type: entity-button
            entity: light.bulb_14
            name: "Living room left"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.mood_lamp
            icon: mdi:lava-lamp
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

          - type: entity-button
            entity: light.ikea_lamp_2
            name: "Entrance"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.kitchen_lights_1
            name: "Kitchen 1"
            icon: mdi:track-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

          - type: entity-button
            entity: light.kitchen_lights_2
            name: "Kitchen 2"
            icon: mdi:track-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

      - type: vertical-stack
        cards:
        - type: markdown
          content: >
            # Second floor
        - type: horizontal-stack
          cards:
          - type: gauge
            title: "Temperature"
            entity: sensor.temperature_158d0002320bc1
            min: 0
            max: 50
            severity:
              yellow: 0
              green: 22
              red: 40
          - type: gauge
            title: "Humidity"
            entity: sensor.humidity_158d0002320bc1
            min: 0
            max: 100
            severity:
              yellow: 0
              green: 40
              red: 80

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.bulb_13
            name: "Bedroom"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info
          - type: entity-button
            entity: light.bed_led
            name: "Bed light"
            tap_action:
              action: toggle
            hold_action: 
              action: more-info
            icon: mdi:bed-empty

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.ikea_lamp_1
            name: "Upstairs"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

          - type: entity-button
            entity: light.bulb_15
            name: "Work room"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.xiaomi_philips_desklamp
            icon: mdi:desk-lamp
            tap_action:
              action: toggle
            hold_action: 
              action: more-info

          - type: entity-button
            entity: light.bulb_17
            name: "Room"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            hold_action: 
              action: more-info
             

