title: My Home
# Include external resources
resources:
  - url: /local/custom_ui/alarm_control_panel-card.js
    type: js
  - url: /local/custom_ui/dark-sky-weather-card.js?v=6
    type: js
  - url: /local/custom_ui/dark-sky-weather-card.css
    type: css
  - url: /local/custom_ui/bignumber-card.js
    type: js
  - url: /local/custom_ui/gauge-card.js
    type: js
  - url: /local/custom_ui/slider-entity-row.js
    type: js

# Optional background for all views. Check https://developer.mozilla.org/en-US/docs/Web/CSS/background for more examples.
background: center / cover no-repeat url("/background.png") fixed
# Exclude entities from "Unused entities" view
excluded_entities:
  - weblink.router
views:
    # View tab title.
  - title: "Overview"
    # Optional unique id for direct access /lovelace/${id}
    id: overview
    # Optional background (overwrites the global background).
    background: radial-gradient(crimson, skyblue)
    # Each view can have a different theme applied. Theme should be defined in the frontend.
    theme: dark-mode
    # The cards to show on this view.
    cards:
      - type: entities
        entities:
          - alarm_control_panel.house
          - sensor.keypad

      - type: entities
        entities:
        - device_tracker.google_maps_104206738568170616102

      - type: entities
        entities:
        - sensor.moonphases

      - type: entities
        entities:
        - sensor.sunrise_time
        - sensor.solar_angle
        - sensor.sunset_time

      - type: entities
        entities:
        - sensor.vasttrafik_linje_176_mot_lindholmen
        - sensor.vasttrafik_linje_176_mot_rannebergen
        - sensor.vasttrafik_linje_75_mot_angered

      - type: vertical-stack
        cards:
        - type: glance
          title: Current weather
          column_width: calc(100% / 4)
          entities:
          - sensor.yr_temperature
          - sensor.yr_humidity
          - sensor.yr_pressure
          - sensor.yr_cloudiness
        - type: glance
          column_width: calc(100% / 4)
          entities:
          - sensor.yr_precipitation
          - sensor.yr_wind_speed
          - sensor.yr_wind_direction
          - sensor.yr_fog

#      - type: entity-filter
#        entities:
#          - device_tracker.google_maps_104206738568170616102
#        state_filter:
#          - 'home'
#        card:
#          type: media-control
#          entity: media_player.sirius

      - type: entities
        entities:
        - switch.wifi_cord_1
        - switch.tasmota_sonoff1

      - type: entities
        entities:
        - binary_sensor.door_window_sensor_158d00022da733

#      - type: picture-entity
#        entity: camera.foscam_1
#      - type: picture-entity
#        entity: camera.foscam_2

  - title: "First floor"
    id: floor1
    cards:
      - type: picture-elements
        image: /local/images/first_floor_ext.jpg
        elements:
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a817
            style:
              top: 77%
              left: 46%
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000200ce6a
            style:
              top: 35%
              left: 73%
          - type: state-icon # Motion - Living room
            entity: binary_sensor.motion_sensor_158d00023e8333
            style:
              top: 25%
              left: 39%
          - type: state-icon
            entity: light.bulb_12
            tap_action: toggle
            hold_action: more-info
            style:
              top: 45%
              left: 32%
          - type: state-icon
            entity: light.bulb_14
            tap_action: toggle
            hold_action: more-info
            style:
              top: 45%
              left: 47%
          - type: state-icon # Light - Entrance
            entity: light.bulb_16
            tap_action: toggle
            hold_action: more-info
            style:
              top: 77%
              left: 53%
          - type: state-icon # Door - Entrance
            entity: binary_sensor.door_window_sensor_158d000238694e
            style:
              top: 92%
              left: 47.8%
          - type: state-icon # Door - Living room
            entity: binary_sensor.door_window_sensor_158d00022bd3cb
            style:
              top: 50.5%
              left: 20%
          - type: state-icon # Door - Kitchen
            entity: binary_sensor.door_window_sensor_158d000232d8e8
            style:
              top: 43%
              left: 84.5%
          - type: state-icon # Water leak
            entity: binary_sensor.water_leak_sensor_158d00023aa4a9
            style:
              top: 74%
              left: 70%
          - type: state-icon # Smoke detector
            entity: binary_sensor.smoke_sensor_158d0002311b86
            style:
              top: 41%
              left: 57%
          - type: state-label
            entity: sensor.temperature_158d000245a9ee
            style:
              top: 15%
              left: 50%
      - type: vertical-stack
        cards:
        - type: glance
          column_width: calc(100% / 3)
          entities:
            - binary_sensor.motion_sensor_158d000236a817
            - binary_sensor.motion_sensor_158d00023e8333
            - binary_sensor.motion_sensor_158d000200ce6a
        - type: glance
          column_width: calc(100% / 3)
          entities:
            - binary_sensor.door_window_sensor_158d000238694e
            - binary_sensor.door_window_sensor_158d00022bd3cb
            - binary_sensor.door_window_sensor_158d000232d8e8
        - type: glance
          column_width: calc(100% / 3)
          entities:
            - sensor.illumination_158d000236a817
            - sensor.illumination_158d00023e8333
            - sensor.illumination_158d000200ce6a
      - type: glance
        column_width: calc(100% / 3)
        entities:
          - sensor.temperature_158d000245a9ee
          - sensor.humidity_158d000245a9ee
          - sensor.pressure_158d000245a9ee
      - type: vertical-stack
        cards:
        - type: entities
          title: Lights
          entities:
            - type: custom:slider-entity-row
              entity: light.gateway_light_7811dcb7f720
              name: Xiaomi Gateway
            - type: custom:slider-entity-row
              entity: light.bulb_12
              name: Living room right
            - type: custom:slider-entity-row
              entity: light.bulb_14
              name: Living room left
            - type: custom:slider-entity-row
              entity: light.bulb_16
              name: Entrance


  - title: "Second floor"
    id: floor2
    cards:
      - type: picture-elements
        image: /local/images/second_floor_ext.jpg
        elements:
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a19b
            style:
              top: 77%
              left: 50%
          - type: state-icon
            entity: light.light1
            tap_action: toggle
            hold_action: more-info
            style:
              top: 61%
              left: 50%
          - type: state-icon  # Bedroom - light
            entity: light.bulb_13 
            tap_action: toggle
            hold_action: more-info
            style:
              top: 50%
              left: 26%
          - type: state-icon  # Bedroom - Motion sensor
            entity: binary_sensor.motion_sensor_158d000236a59e
            style:
              top: 35%
              left: 26%
          - type: state-icon  # Bedroom - bed light
            entity: light.bed_led
            tap_action: toggle
            hold_action: more-info
            style:
              top: 18%
              left: 26%
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a581
            style:
              top: 70%
              left: 80%
          - type: state-label
            entity: sensor.temperature_158d0002320bc1
            style:
              top: 48%
              left: 50%
          - type: state-icon # Workroom light
            entity: light.bulb_15
            tap_action: toggle
            hold_action: more-info
            style:
              top: 70%
              left: 70%
          - type: state-icon
            entity: binary_sensor.motion_sensor_158d000236a581
            style:
              top: 70%
              left: 80%
          - type: state-icon # Water sensor
            entity: binary_sensor.water_leak_sensor_158d00023e90af
            style:
              top: 25%
              left: 49%
          - type: state-icon # Room light
            entity: light.bulb_17
            tap_action: toggle
            hold_action: more-info
            style:
              top: 33%
              left: 74%
      - type: glance
        column_width: calc(100% / 3)
        entities:
          - sensor.temperature_158d0002320bc1
          - sensor.humidity_158d0002320bc1
          - sensor.pressure_158d0002320bc1
      - type: glance
        column_width: calc(100% / 3)
        entities:
          - sensor.illumination_158d000236a19b
          - sensor.illumination_158d000236a59e
          - sensor.illumination_158d000236a581
      - type: vertical-stack
        cards:
        - type: entities
          title: Lights
          entities:
            - type: custom:slider-entity-row
              entity: light.light1
              name: Upstairs
            - type: custom:slider-entity-row
              entity: light.bulb_13
              name: Bedroom
            - type: custom:slider-entity-row
              entity: light.bed_led
              name: Bed LED
            - type: custom:slider-entity-row
              entity: light.bulb_15
              name: Work room


  - title: "Weather"
    id: weather
    cards:
#      - type: iframe
#        url: https://embed.windy.com/embed2.html?lat=58.356&lon=13.535&zoom=4
#        aspect_ratio: 75%
      - type: picture-elements
        image: https://www.yr.no/place/Sweden/V%C3%A4stra_G%C3%B6taland/Gothenburg/meteogram.svg
        elements:
        - type: state-icon
      - type: custom:dark-sky-weather-card
        entity_sun: sun.sun
        entity_daily_summary: sensor.dark_sky_daily_summary
        entity_current_conditions: sensor.dark_sky_icon  
        entity_humidity: sensor.dark_sky_humidity
        entity_pressure: sensor.dark_sky_pressure
        entity_temperature: sensor.dark_sky_temperature
        entity_visibility: sensor.dark_sky_visibility
        entity_wind_bearing: sensor.dark_sky_wind_bearing
        entity_wind_speed: sensor.dark_sky_wind_speed
        entity_forecast_high_temp_1: sensor.dark_sky_daytime_high_temperature_1
        entity_forecast_high_temp_2: sensor.dark_sky_daytime_high_temperature_2
        entity_forecast_high_temp_3: sensor.dark_sky_daytime_high_temperature_3
        entity_forecast_high_temp_4: sensor.dark_sky_daytime_high_temperature_4
        entity_forecast_high_temp_5: sensor.dark_sky_daytime_high_temperature_5
        entity_forecast_low_temp_1: sensor.dark_sky_overnight_low_temperature
        entity_forecast_low_temp_2: sensor.dark_sky_overnight_low_temperature_1
        entity_forecast_low_temp_3: sensor.dark_sky_overnight_low_temperature_2
        entity_forecast_low_temp_4: sensor.dark_sky_overnight_low_temperature_3
        entity_forecast_low_temp_5: sensor.dark_sky_overnight_low_temperature_4
        entity_forecast_icon_1: sensor.dark_sky_icon_1
        entity_forecast_icon_2: sensor.dark_sky_icon_2
        entity_forecast_icon_3: sensor.dark_sky_icon_3
        entity_forecast_icon_4: sensor.dark_sky_icon_4
        entity_forecast_icon_5: sensor.dark_sky_icon_5
      - type: history-graph
        title: Temperature history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_temperature
            name: Yr temperature
          - entity: sensor.temperature_158d0002478a68
            name: Temperature sensor
      - type: history-graph
        title: Humidity history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_humidity
            name: Yr humidity
          - entity: sensor.humidity_158d0002478a68
            name: Humidity sensor
      - type: history-graph
        title: Pressure history
        hours_to_show: 48
        entities:
          - entity: sensor.yr_pressure
            name: Yr pressure
          - entity: sensor.pressure_158d0002478a68
            name: Pressure sensor
      - type: glance
        column_width: calc(100% / 3)
        entities:
          - sensor.temperature_158d0002478a68
          - sensor.humidity_158d0002478a68
          - sensor.pressure_158d0002478a68


  - title: "Settings"
    id: settings
    cards:
      - type: entities
        show_header_toggle: false
        entities:
          - sensor.hass_available_version
          - sensor.hass_installed_version
      - type: entities
        show_header_toggle: false
        title: HA Files
        entities:
          - sensor.homeassistant_v2db
          - sensor.homeassistantlog
      - type: entities
        show_header_toggle: false
        entities:
          - sensor.ssh_attack
      - type: entities
        show_header_toggle: false
        title: Batteries
        entities:
          - sensor.tradfri_remote_control_battery_level
          #- sensor.ikea_switch_1_battery_level
          - sensor.ikea_switch_2_battery_level
          - sensor.battery_temperature_sensor_floor1
          - sensor.battery_temperature_sensor_floor2
          - sensor.battery_temperature_sensor_outside
          - sensor.battery_motion_sensor_living_room
          - sensor.battery_motion_sensor_kitchen
          - sensor.battery_motion_sensor_entrance
          - sensor.battery_motion_sensor_second_floor
          - sensor.battery_water_leak_sensor
          - sensor.battery_smoke_sensor
          - sensor.battery_door_sensor_entrance
          - sensor.battery_door_sensor_kitchen
          - sensor.battery_door_sensor_living_room
          - sensor.battery_door_sensor_storehouse
      - type: vertical-stack
        cards:
        - type: entities
          show_header_toggle: false
          title: Alarms
          entities:
            - automation.water_leakage_floor_1
            - automation.water_leakage_floor_2
            - automation.too_high_temperature_at_the_first_floor
            - automation.too_high_temperature_at_the_second_floor
            - automation.smoke_alarm
        - type: entities
          show_header_toggle: false
          title: Automations
          entities:
              - automation.update_available_notifications
              - automation.entrance_door_sound
              - automation.turn_on_upstairs_light_if_movements_2300__0630
              - automation.turn_on_upstairs_light_if_movements_0630__2300
              - automation.turn_off_upstairs_light_in_10_seconds_0000__0630
              - automation.turn_off_upstairs_light_in_5_minutes_0630__0000
              - automation.entrance_light_before_the_buss
              - automation.entrance_light_is_on_when_the_door_is_open
              - automation.turn_off_the_entrance_light_in_5_minutes_after_the_door_was_closed
              - automation.bed_led_sunrise
      - type: vertical-stack
        cards:
          - type: entities
            title: Network
            show_header_toggle: false
            entities:
              - sensor.nmap_router
              - sensor.nmap_xiaomi_gateway
              - sensor.nmap_google_home
              - sensor.nmap_laptop_dell_xps15
              - sensor.nmap_laptop_dell_xps13
              - sensor.nmap_iphone
              - sensor.nmap_galaxy_s9
              - sensor.nmap_galaxy_tablet
          - type: history-graph
            title: 'Ping'
            hours_to_show: 24
            entities:
              - sensor.ping_min_xiaomi
              - sensor.ping_avg_xiaomi
              - sensor.ping_max_xiaomi
      - type: entities
        show_header_toggle: false
        entities:
          - input_boolean.debug_mode
      - type: conditional
        conditions:
          - entity: input_boolean.debug_mode
            state: "on"
          - entity: alarm_control_panel.house
            state: "disarmed"
        card: 
          type: vertical-stack
          cards:
            - type: entities
              title: Debug card
              entities:
                - automation.alarm_sound_rpi_speaker
                - automation.alarm_sound_pending
                - script.test_pushover
                - script.alarm_light_xiaomi_gateway
                - script.alarm_light_xiaomi_gateway_loop
                - script.alarm_on
                - script.alarm_off
            - type: entities
              title: Xiaomi Alarm settings
              show_header_toggle: false
              entities:
                - input_select.gateway_sound
                - input_boolean.mute_gateway_sounds
                - input_number.gateway_volume
                - input_number.loop_delay
                - script.alarm_sound_xiaomi_gateway
                - script.alarm_sound_xiaomi_gateway_once


  - title: "Kiosk"
    id: kiosk
    cards:
      - type: vertical-stack
        cards:
        - type: markdown
          content: >
            # First floor
        - type: horizontal-stack
          title: First floor
          cards:
          - type: gauge
            title: "Temperature"
            entity: sensor.temperature_158d000245a9ee
            min: 0
            max: 50
            severity:
              yellow: 0
              green: 22
              red: 40
          - type: gauge
            title: "Humidity"
            entity: sensor.humidity_158d000245a9ee
            min: 0
            max: 100
            severity:
              yellow: 0
              green: 40
              red: 80
        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.bulb_12
            name: "Living room right"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info
          - type: entity-button
            entity: light.bulb_14
            name: "Living room left"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.gateway_light_7811dcb7f720
            name: "Xiaomi light"
            icon: mdi:flash-circle
            tap_action: toggle
            hold_action: more-info

          - type: entity-button
            entity: light.bulb_16
            name: "Entrance"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info

      - type: vertical-stack
        cards:
        - type: markdown
          content: >
            # Second floor
        - type: horizontal-stack
          cards:
          - type: gauge
            title: "Temperature"
            entity: sensor.temperature_158d0002320bc1
            min: 0
            max: 50
            severity:
              yellow: 0
              green: 22
              red: 40
          - type: gauge
            title: "Humidity"
            entity: sensor.humidity_158d0002320bc1
            min: 0
            max: 100
            severity:
              yellow: 0
              green: 40
              red: 80

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.bulb_13
            name: "Bedroom"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info
          - type: entity-button
            entity: light.bed_led
            name: "Bed light"
            tap_action: toggle
            hold_action: more-info
            icon: mdi:bed-empty

        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: light.light1
            name: "Upstairs"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info

          - type: entity-button
            entity: light.bulb_15
            name: "Work room"
            icon: mdi:ceiling-light
            tap_action: toggle
            hold_action: more-info

#        - type: entity-button
#          entity: switch.wifi_cord_1
#          name: "WiFi cord"
#          icon: mdi:power-socket-eu
#          tap_action: toggle
             

